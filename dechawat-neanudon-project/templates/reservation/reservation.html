{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    {% csrf_token %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google" content="notranslate">
    <title>จองสนาม</title>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">
    <link rel="stylesheet" href="../../static/css/output.css">
    <script src="https://unpkg.com/@tailwindcss/browser@4"></script>
    <script>
        window.onload = function() {
            // ดึง field_id จาก URL
            const urlParams = new URLSearchParams(window.location.search);
            const fieldId = urlParams.get('field_id');
            
            // กำหนดข้อมูลสนาม
            const fields = {
                1: { name: 'สนามใหญ่', capacity: 22 },
                2: { name: 'สนามกลาง', capacity: 14 },
                3: { name: 'สนามเล็ก', capacity: 10 }
            };
            
            if(fieldId && fields[fieldId]) {
                const field = fields[fieldId];
                document.querySelector('h2').textContent = 
                    `${field.name} สำหรับ ${field.capacity} คน`;
            }
        };
    </script>
</head>
<body>
    <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
    <!-- Navbar -->
    <div class="bg-white w-full h-20 fixed top-0 z-50 shadow-md">
        <div class="flex justify-between item-center h-20 mx-auto">
            <!-- logo -->
            <div class=" flex justify-between items-center top-0 ml-5 gap-3">
                <a href="../home-th.html" ><img src="../../static/images/logo.png" alt="logo" class="w-16 h-auto"></a>
                <a href="../home-th.html" class="text-semibold text-red-600 font-bold text-4xl">T.A.SOCCER</a>
            </div>
            <!-- mid nav -->
            <div class="flex space-x-6 text-gray-700 font-medium">
                <ul class="flex justify-between items-center gap-7 text-lg">
                    <li><a href="../home-th.html" class="hover:text-red-600">หน้าหลัก</a></li>
                    <li><a href="#" class="hover:text-red-600">เกี่ยวกับเรา</a></li>
                    <li><a href="#" class="hover:text-red-600">กิจกรรม</a></li>
                    <li><a href="#" class="hover:text-red-600">แกลอรี่</a></li>
                    <li><a href="#" class="hover:text-red-600">ติดต่อเรา</a></li>
                </ul>
            </div>
            <!-- right login button -->
            <div class="flex justify-center items-center" style="margin-left: 100px;">
                <a href="#" class="bg-red-600 rounded-full mr-6 ml-14 px-6 py-2 hover:bg-red-500 text-white hidden">เข้าสู่ระบบ</a>
                <a href="#">
                    <span class="material-symbols-outlined mr-6 " style="font-size: 40px;">
                        account_circle
                    </span>
                </a> 
            </div>
        </div>
    </div>

    <!-- main container -->
    <div class="mt-20 flex justify-between items-center bg-gray-600 h-[calc(100vh-5rem)]">
        <!-- sub container -->
        <div class="mx-auto grid grid-cols-2 gap-40">
            <!-- left column -->
            <div class="bg-white p-6 rounded-lg shadow-md">
                <!-- date box -->
                <div class="flex justify-center mb-6 bg-gray-300">
                    <input type="date" id="date">
                </div>
                <!-- booking status table -->
                <table class="w-full border-collapse">
                    <thead>
                        <tr>
                        <th class="py-2 px-4 bg-gray-200 px-25">เวลา</th>
                        <th class="py-2 px-4 bg-gray-200 px-25">สถานะ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="border-b text-center">
                            <td class="py-2 px-4">14.00 - 15.00</td>
                            <td class="py-2 px-4">
                                <button 
                                    onclick="selectTimeSlot(this, '14.00', '15.00')" 
                                    data-start="14.00"
                                    data-end="15.00"
                                    class="w-4 h-4 bg-green-500 hover:opacity-80 transition-all"
                                ></button>
                            </td>
                        </tr>
                        <tr class="border-b text-center">
                            <td class="py-2 px-4">15.00 - 16.00</td>
                            <td class="py-2 px-4">
                                <button 
                                    onclick="selectTimeSlot(this, '15.00', '16.00')" 
                                    data-start="15.00"
                                    data-end="16.00"
                                    class="w-4 h-4 bg-green-500 hover:opacity-80 transition-all"
                                ></button>
                            </td>
                        </tr>
                        <tr class="border-b text-center">
                            <td class="py-2 px-4">16.00 - 17.00</td>
                            <td class="py-2 px-4">
                                <button 
                                    onclick="selectTimeSlot(this, '16.00', '17.00')" 
                                    data-start="16.00"
                                    data-end="17.00"
                                    class="w-4 h-4 bg-green-500 hover:opacity-80 transition-all"
                                ></button>
                            </td>
                        </tr>
                        <tr class="border-b text-center">
                            <td class="py-2 px-4">17.00 - 18.00</td>
                            <td class="py-2 px-4">
                                <button 
                                    onclick="selectTimeSlot(this, '17.00', '18.00')" 
                                    data-start="17.00"
                                    data-end="18.00"
                                    class="w-4 h-4 bg-green-500 hover:opacity-80 transition-all"
                                ></button>
                            </td>
                        </tr>
                        <tr class="border-b text-center">
                            <td class="py-2 px-4">18.00 - 19.00</td>
                            <td class="py-2 px-4">
                                <button 
                                    onclick="selectTimeSlot(this, '18.00', '19.00')" 
                                    data-start="18.00"
                                    data-end="19.00"
                                    class="w-4 h-4 bg-green-500 hover:opacity-80 transition-all"
                                ></button>
                            </td>
                        </tr>
                        <tr class="border-b text-center">
                            <td class="py-2 px-4">19.00 - 20.00</td>
                            <td class="py-2 px-4">
                                <button 
                                    onclick="selectTimeSlot(this, '19.00', '20.00')" 
                                    data-start="19.00"
                                    data-end="20.00"
                                    class="w-4 h-4 bg-green-500 hover:opacity-80 transition-all"
                                ></button>
                            </td>
                        </tr>
                        <tr class="border-b text-center">
                            <td class="py-2 px-4">20.00 - 21.00</td>
                            <td class="py-2 px-4">
                                <button 
                                    onclick="selectTimeSlot(this, '20.00', '21.00')" 
                                    data-start="20.00"
                                    data-end="21.00"
                                    class="w-4 h-4 bg-green-500 hover:opacity-80 transition-all"
                                ></button></td>
                        </tr>
                        <tr class="border-b text-center">
                            <td class="py-2 px-4">21.00 - 22.00</td>
                            <td class="py-2 px-4">
                                <button 
                                    onclick="selectTimeSlot(this, '21.00', '22.00')" 
                                    data-start="21.00"
                                    data-end="22.00"
                                    class="w-4 h-4 bg-green-500 hover:opacity-80 transition-all"
                                ></button>
                            </td>
                        </tr>
                        <tr class="border-b text-center">
                            <td class="py-2 px-4">22.00 - 23.00</td>
                            <td class="py-2 px-4">
                                <button 
                                    onclick="selectTimeSlot(this, '22.00', '23.00')" 
                                    data-start="22.00"
                                    data-end="23.00"
                                    class="w-4 h-4 bg-green-500 hover:opacity-80 transition-all"
                                ></button></td>
                        </tr>
                        <tr class="border-b text-center">
                            <td class="py-2 px-4">23.00 - 24.00</td>
                            <td class="py-2 px-4">
                                <button 
                                    onclick="selectTimeSlot(this, '23.00', '24.00')" 
                                    data-start="23.00"
                                    data-end="24.00"
                                    class="w-4 h-4 bg-green-500 hover:opacity-80 transition-all"
                            ></button>
                            </td>
                        </tr>
                    </tbody>
                </table>
        
                <div class="mt-4 flex gap-4">
                    <div class="flex items-center gap-2">
                        <div class="w-4 h-4 bg-green-500"></div>
                        <span>ว่าง</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <div class="w-4 h-4 bg-red-500"></div>
                        <span>จองแล้ว</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <div class="w-4 h-4 bg-yellow-500"></div>
                        <span>กำลังจอง</span>
                    </div>
                </div>
            </div>
        
            <!-- right column -->
            <div class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-xl mb-6 text-center text-semibold">{{ field.name }} สำหรับ {{ field.capacity }} คน</h2>
                
                <form id="bookingForm" onsubmit="event.preventDefault();"></form>
                <div class="space-y-4">
                    <!-- reserver's name -->
                    <div>
                        <label class="block text-gray-700 mb-2">ชื่อผู้จอง</label>
                        <input type="text" class="w-full p-2 border rounded-md" id="reserverName">
                    </div>
                    <!-- reserver's phone number -->
                    <div>
                        <label class="block text-gray-700 mb-2">เบอร์โทรศัพท์</label>
                        <input type="tel" class="w-full p-2 border rounded-md" id="reseverPhone">
                    </div>
            
                    <div>
                        <label class="block text-gray-700 mb-2">เวลาที่จะจอง</label>
                        <div id="selectedTimeRange" class="text-lg font-semibold text-gray-900">-</div>
                    </div>
            
                    <div>
                        <label class="block text-gray-700 mb-2">รวม:</label>
                        <div id="totalPrice" class="text-lg font-semibold text-red-600">-</div>
                    </div>
                    <button 
                        type="button"
                        onclick="submitBooking(event)" 
                        id="bookingButton" 
                        class="w-full p-2 bg-red-500 text-white rounded hover:bg-red-600 disabled:bg-gray-400 disabled:cursor-not-allowed" 
                        disabled>
                        จอง
                    </button>
                    </div></a>
                </div>
            </div>
        </div>
    </div>
    <script src="../../static/js/booking.js"></script>
</body>
</html>